{"ast":null,"code":"import _objectSpread from\"C:/Users/B\\xE9r\\xE9nice/Documents/nodeJS/react-xstate-colourchanger/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{assign,actions}from\"xstate\";const send=actions.send,cancel=actions.cancel;import{inspect}from'@xstate/inspect';inspect({url:\"https://statecharts.io/inspect\",iframe:false});import{nluRequest}from\"./index.tsx\";function say(text){return send(_context=>({type:\"SPEAK\",value:text}));}function listen(){return send('LISTEN');}function prompt(prompt){return{initial:'prompt',states:{prompt:{entry:say(prompt)}}};}function promptAndAsk(prompt,nomatch,help){return{initial:'prompt',states:{prompt:{entry:say(prompt),on:{ENDSPEECH:'ask'}},ask:{entry:[send('LISTEN'),send('MAXSPEECH',{delay:8000,id:'maxsp'})]},nomatch:{entry:say(nomatch),on:{ENDSPEECH:[{actions:cancel('maxsp'),target:\"prompt\"}]}},help:{entry:say(help),on:{ENDSPEECH:[{actions:cancel('maxsp'),target:\"prompt\"}]}}}};}export const dmMachine={initial:'init',states:{init:{on:{CLICK:'start'}},start:{initial:'welcome',on:{MAXSPEECH:[{cond:context=>context.counter===1,target:\"second_call\"},{cond:context=>context.counter===2,target:\"last_call\"},{target:\"first_call\"}]},states:{hist:{type:'history'},welcome:_objectSpread({on:{RECOGNISED:{actions:cancel('maxsp'),target:'query'}}},promptAndAsk(\"What do you want me to do?\")),query:{invoke:{id:'rasa',src:(context,event)=>nluRequest(context.recResult),onDone:{actions:[assign((context,event)=>{return{nluData:event.data};}),cancel('maxsp')],target:'rasaChoice'},onError:{actions:[assign({errorMessage:(context,event)=>console.log(event.data)}),cancel('maxsp')],target:'failure'}}},failure:{initial:\"prompt\",on:{ENDSPEECH:\"welcome\"},states:{prompt:{entry:say(\"There is an error. Please check your proxy, your browser or retry later.\")}}},rasaChoice:_objectSpread({initial:\"prompt\",on:{ENDSPEECH:[{cond:context=>context.nluData.intent.name==='appointment',target:\"appointment\"},{cond:context=>context.nluData.intent.name==='TODO_item',target:\"todo\"},{cond:context=>context.nluData.intent.name==='timer',target:\"timer\"},{target:\"welcome\"}]}},prompt(\"Actualization.\")),appointment:_objectSpread(_objectSpread({},prompt(\"Okay, let's create an appointment!\")),{},{on:{ENDSPEECH:{actions:cancel('maxsp'),target:\"who\"}}}),todo:_objectSpread(_objectSpread({},prompt(\"Let's create a to-do list!\")),{},{on:{ENDSPEECH:{actions:cancel('maxsp'),target:\"welcome\"}}}),timer:_objectSpread(_objectSpread({},prompt(\"Let's start a timer!\")),{},{on:{ENDSPEECH:{actions:cancel('maxsp'),target:\"welcome\"}}}),who:_objectSpread({initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"person\"in(dict[context.recResult]||{}),actions:[assign(context=>{return{person:dict[context.recResult].person};}),cancel('maxsp')],target:\"day\"},{cond:context=>\"help\"in(dict[context.recResult]||{}),target:\".help\"},{target:\".nomatch\"}]}},promptAndAsk(\"Who are you meeting with?\",\"Sorry, I don't know them.\",\"You can say Jennifer or John for example.\")),day:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"day\"in(dict[context.recResult]||{}),actions:[assign(context=>{return{day:dict[context.recResult].day};}),cancel('maxsp')],target:\"duration\"},{cond:context=>\"help\"in(dict[context.recResult]||{}),target:\".help\"},{target:\".nomatch\"}]},states:{prompt:{entry:send(context=>({type:\"SPEAK\",value:'On which day is your meeting?'})),on:{ENDSPEECH:\"ask\"}},ask:{entry:[send('LISTEN'),send('MAXSPEECH',{delay:8000,id:'maxsp'})]},help:{entry:say(\"You can say monday, tuesday and so on.\"),on:{ENDSPEECH:[{actions:cancel('maxsp'),target:\"prompt\"}]}},nomatch:{entry:say(\"Sorry, can you repeat?\"),on:{ENDSPEECH:[{actions:cancel('maxsp'),target:\"prompt\"}]}}}},duration:_objectSpread({initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"agree\"in(dict[context.recResult]||{}),actions:[assign(context=>{return{agree:dict[context.recResult].agree};}),cancel('maxsp')],target:\"confirmationWholeDay\"},{cond:context=>\"refuse\"in(dict[context.recResult]||{}),actions:[assign(context=>{return{refuse:dict[context.recResult].refuse};}),cancel('maxsp')],target:\"time\"},{cond:context=>\"help\"in(dict[context.recResult]||{}),target:\".help\"},{target:\".nomatch\"}]}},promptAndAsk(\"Will it take the whole day?\",\"Sorry, can you repeat?\",\"You can answer with yes or no.\")),time:_objectSpread({initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"time\"in(dict[context.recResult]||{}),actions:[assign(context=>{return{time:dict[context.recResult].time};}),cancel('maxsp')],target:\"regularConfirmation\"},{cond:context=>\"help\"in(dict[context.recResult]||{}),target:\".help\"},{target:\".nomatch\"}]}},promptAndAsk(\"What time is your meeting?\",\"Sorry, can you repeat?\",\"You can choose between 8 to 12 or 1 to 6.\")),regularConfirmation:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"agree\"in(dict[context.recResult]||{}),actions:[assign(context=>{return{agree:dict[context.recResult].agree};}),cancel('maxsp')],target:\"confirmation\"},{cond:context=>\"help\"in(dict[context.recResult]||{}),target:\".help\"},{cond:context=>\"refuse\"in(dict[context.recResult]||{}),actions:[assign(context=>{return{refuse:dict[context.recResult].refuse};}),cancel('maxsp')],target:\"who\"},{target:\".nomatch\"}]},states:{prompt:{entry:send(context=>({type:\"SPEAK\",value:\"Do you want me to create an appointment with \".concat(context.person,\" on \").concat(context.day,\" at \").concat(context.time,\" ?\")})),on:{ENDSPEECH:\"ask\"}},ask:{entry:[send('LISTEN'),send('MAXSPEECH',{delay:8000,id:'maxsp'})]},help:{entry:say(\"You can answer with yes or no.\"),on:{ENDSPEECH:[{actions:cancel('maxsp'),target:\"prompt\"}]}},nomatch:{entry:say(\"Sorry can you repeat?\"),on:{ENDSPEECH:[{actions:cancel('maxsp'),target:\"prompt\"}]}}}},confirmationWholeDay:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"agree\"in(dict[context.recResult]||{}),actions:[assign(context=>{return{agree:dict[context.recResult].agree};}),cancel('maxsp')],target:\"confirmation\"},{cond:context=>\"refuse\"in(dict[context.recResult]||{}),actions:[assign(context=>{return{refuse:dict[context.recResult].refuse};}),cancel('maxsp')],target:\"who\"},{cond:context=>\"help\"in(dict[context.recResult]||{}),target:\".help\"},{target:\".nomatch\"}]},states:{prompt:{entry:send(context=>({type:\"SPEAK\",value:\"Do you want me to create an appointment with \".concat(context.person,\" on \").concat(context.day,\" for the whole day?\")})),on:{ENDSPEECH:\"ask\"}},ask:{entry:[send('LISTEN'),send('MAXSPEECH',{delay:8000,id:'maxsp'})]},help:{entry:say(\"You can answer with yes or no.\"),on:{ENDSPEECH:[{actions:cancel('maxsp'),target:\"prompt\"}]}},nomatch:{entry:say(\"Sorry can you repeat?\"),on:{ENDSPEECH:[{actions:cancel('maxsp'),target:\"prompt\"}]}}}},confirmation:_objectSpread(_objectSpread({},prompt(\"Your appointment has been created!\")),{},{on:{ENDSPEECH:\"welcome\"}})}},first_call:{entry:say(\"Please focus on my question.\"),on:{ENDSPEECH:[{cond:context=>context.counter===1,target:\"#root.dm.start.hist\"},{cond:context=>context.counter===2,target:\"#root.dm.start.hist\"},{cond:context=>context.counter===3,target:\"#root.dm.start.hist\"}]}},second_call:{entry:say(\"Are you still listening?\"),on:{ENDSPEECH:[{cond:context=>context.counter===1,target:\"#root.dm.start.hist\"},{cond:context=>context.counter===2,target:\"#root.dm.start.hist\"},{cond:context=>context.counter===3,target:\"#root.dm.start.hist\"}]}},last_call:{entry:say(\"Whatever, I don't want to listen anymore.\"),on:{ENDSPEECH:[{cond:context=>context.counter===1,target:\"#root.dm.start.hist\"},{cond:context=>context.counter===2,target:\"#root.dm.start.hist\"},{cond:context=>context.counter===3,target:\"#root.dm\"}]}}}};const dict={\"John\":{person:\"John Appleseed\"},\"Mary\":{person:\"Mary Orangeseed\"},\"Dan\":{person:\"Dan Cherryseed\"},\"Steve\":{person:\"Steve Strawberryseed\"},\"Klaus\":{person:\"Klaus Pearseed\"},\"Gus\":{person:\"Gus Bananaseed\"},\"Jennifer\":{person:\"Jennifer Pineappleseed\"},\"Monday\":{day:\"Monday\"},\"Tuesday\":{day:\"Tuesday\"},\"Wednesday\":{day:\"Wednesday\"},\"Thursday\":{day:\"Thursday\"},\"Friday\":{day:\"Friday\"},\"Saturday\":{day:\"Saturday\"},\"Sunday\":{day:\"Sunday\"},\"next Monday\":{day:\"Monday\"},\"next Tuesday\":{day:\"Tuesday\"},\"next Wednesday\":{day:\"Wednesday\"},\"next Thursday\":{day:\"Thursday\"},\"next Friday\":{day:\"Friday\"},\"next Saturday\":{day:\"Saturday\"},\"next Sunday\":{day:\"Sunday\"},\"on Monday\":{day:\"Monday\"},\"on Tuesday\":{day:\"Tuesday\"},\"on Wednesday\":{day:\"Wednesday\"},\"on Thursday\":{day:\"Thursday\"},\"on Friday\":{day:\"Friday\"},\"on Saturday\":{day:\"Saturday\"},\"on Sunday\":{day:\"Sunday\"},\"it's at 8\":{time:\"08:00\"},\"it's at 9\":{time:\"09:00\"},\"it's at 10\":{time:\"10:00\"},\"it's at 11\":{time:\"11:00\"},\"it's at 12\":{time:\"12:00\"},\"it's at 1\":{time:\"13:00\"},\"it's at 2\":{time:\"14:00\"},\"it's at 3\":{time:\"15:00\"},\"it's at 4\":{time:\"16:00\"},\"it's at 5\":{time:\"17:00\"},\"it's at 6\":{time:\"18:00\"},\"at 8\":{time:\"08:00\"},\"at 9\":{time:\"09:00\"},\"at 10\":{time:\"10:00\"},\"at 11\":{time:\"11:00\"},\"at 12\":{time:\"12:00\"},\"at 1\":{time:\"13:00\"},\"at 2\":{time:\"14:00\"},\"at 3\":{time:\"15:00\"},\"at 4\":{time:\"16:00\"},\"at 5\":{time:\"17:00\"},\"at 6\":{time:\"18:00\"},\"8\":{time:\"08:00\"},\"9\":{time:\"09:00\"},\"10\":{time:\"10:00\"},\"11\":{time:\"11:00\"},\"12\":{time:\"12:00\"},\"1\":{time:\"13:00\"},\"2\":{time:\"14:00\"},\"3\":{time:\"15:00\"},\"4\":{time:\"16:00\"},\"5\":{time:\"17:00\"},\"6\":{time:\"18:00\"},\"around 8\":{time:\"08:00\"},\"around 9\":{time:\"09:00\"},\"around 10\":{time:\"10:00\"},\"around 11\":{time:\"11:00\"},\"around 12\":{time:\"12:00\"},\"around 1\":{time:\"13:00\"},\"around 2\":{time:\"14:00\"},\"around 3\":{time:\"15:00\"},\"around 4\":{time:\"16:00\"},\"around 5\":{time:\"17:00\"},\"around 6\":{time:\"18:00\"},\"I want to book an appointment\":{appointment:\"appointment\"},\"rendez-vous\":{appointment:\"appointment\"},\"appointment\":{appointment:\"appointment\"},\"Let's create an appointment\":{appointment:\"appointment\"},\"I want an appointment\":{appointment:\"appointment\"},\"appointment\":{appointment:\"appointment\"},\"schedule\":{appointment:\"appointment\"},\"to-do list\":{todoitem:\"todoitem\"},\"a to-do list\":{todoitem:\"todoitem\"},\"list\":{todoitem:\"todoitem\"},\"Let's start a to-do list\":{todoitem:\"todoitem\"},\"I have something to do\":{todoitem:\"todoitem\"},\"to do list\":{todoitem:\"todoitem\"},\"timer\":{timer:\"timer\"},\"a timer\":{timer:\"timer\"},\"start the timer\":{timer:\"timer\"},\"ring\":{timer:\"timer\"},\"minute\":{timer:\"timer\"},\"yes\":{agree:\"yes\"},\"yeah\":{agree:\"yes\"},\"sounds good\":{agree:\"yes\"},\"of course\":{agree:\"yes\"},\"probably\":{agree:\"yes\"},\"it's fine\":{agree:\"yes\"},\"no\":{refuse:\"no\"},\"I'm not sure\":{refuse:\"no\"},\"I don't think so\":{refuse:\"no\"},\"no way\":{refuse:\"no\"},\"absolutely not\":{refuse:\"no\"},\"help\":{help:\"help\"},\"I don't understand\":{help:\"help\"},\"please help\":{help:\"help\"},\"can you repeat\":{help:\"help\"},\"let's go back\":{help:\"help\"}};","map":{"version":3,"sources":["C:/Users/Bérénice/Documents/nodeJS/react-xstate-colourchanger/src/dmAppointment.ts"],"names":["assign","actions","send","cancel","inspect","url","iframe","nluRequest","say","text","_context","type","value","listen","prompt","initial","states","entry","promptAndAsk","nomatch","help","on","ENDSPEECH","ask","delay","id","target","dmMachine","init","CLICK","start","MAXSPEECH","cond","context","counter","hist","welcome","RECOGNISED","query","invoke","src","event","recResult","onDone","nluData","data","onError","errorMessage","console","log","failure","rasaChoice","intent","name","appointment","todo","timer","who","dict","person","day","duration","agree","refuse","time","regularConfirmation","confirmationWholeDay","confirmation","first_call","second_call","last_call","todoitem"],"mappings":"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","sourcesContent":["import { MachineConfig, Action, assign, actions } from \"xstate\"\r\nconst { send, cancel } = actions\r\n\r\nimport { inspect } from '@xstate/inspect'\r\ninspect({\r\n  url: \"https://statecharts.io/inspect\",\r\n  iframe: false\r\n});\r\n\r\nimport { nluRequest } from \"./index.tsx\"\r\nimport { loadGrammar } from './runparser'\r\nimport { parse } from './chartparser'\r\nimport { grammar } from './grammars/quotesGrammar.ts'\r\n\r\nfunction say(text: string): Action<SDSContext, SDSEvent> {\r\n    return send((_context: SDSContext) => ({ type: \"SPEAK\", value: text }))\r\n}\r\nfunction listen(): Action<SDSContext, SDSEvent> {\r\n    return send('LISTEN')\r\n}\r\nfunction prompt(prompt: string): MachineConfig<SDSContext, any, SDSEvent> {\r\n    return ({\r\n        initial: 'prompt',\r\n        states: {\r\n            prompt: {\r\n                entry: say(prompt)\r\n            }\r\n        }\r\n    })\r\n}\r\nfunction promptAndAsk(prompt: string, nomatch: string, help: string): MachineConfig<SDSContext, any, SDSEvent> {\r\n    return ({\r\n        initial: 'prompt',\r\n        states: {\r\n                prompt: {\r\n                    entry: say(prompt),\r\n                    on: { ENDSPEECH: 'ask' }\r\n                },\r\n                ask: {\r\n                    entry: [send('LISTEN'), send('MAXSPEECH', { delay: 8000, id: 'maxsp' })]\r\n                },\r\n                nomatch: {\r\n                    entry: say(nomatch),\r\n                    on: { ENDSPEECH: [{ \r\n                            actions: cancel('maxsp'),\r\n                            target: \"prompt\" \r\n                    }] }\r\n                },\r\n                help: {\r\n                    entry: say(help),\r\n                    on: { ENDSPEECH: [{ \r\n                            actions: cancel('maxsp'),\r\n                            target: \"prompt\" \r\n                    }] }\r\n                }\r\n        }\r\n    })\r\n}\r\n\r\nexport const dmMachine: MachineConfig<SDSContext, any, SDSEvent> = ({\r\n    initial: 'init',\r\n    states: {\r\n        init: {\r\n            on: {\r\n                CLICK: 'start'\r\n            }\r\n        },\r\n        start: {\r\n            initial: 'welcome',\r\n            on: {\r\n                MAXSPEECH: [\r\n                    { \r\n                        cond: (context) => context.counter === 1,\r\n                        target: \"second_call\"\r\n                    },\r\n                    {\r\n                        cond: (context) => context.counter === 2,\r\n                        target: \"last_call\"\r\n                    },\r\n                    {\r\n                        target: \"first_call\"\r\n                    }\r\n                ]\r\n            },\r\n            states: {\r\n                hist: { type: 'history' },\r\n                welcome: {\r\n                    on: { RECOGNISED: \r\n                            {   actions: cancel('maxsp'),\r\n                                target: 'query'\r\n                            }\r\n                    },\r\n                    ...promptAndAsk(\"What do you want me to do?\"),\r\n                },\r\n                query: {\r\n                    invoke: {\r\n                        id: 'rasa',\r\n                        src: (context, event) => nluRequest(context.recResult),\r\n                        onDone: {\r\n                            actions: [ assign((context, event) => { return { nluData: event.data }}), cancel('maxsp')],\r\n                            target: 'rasaChoice'\r\n                        },\r\n                        onError: {\r\n                            actions: [ assign({ errorMessage: (context, event) => console.log(event.data)}), cancel('maxsp')],\r\n                            target: 'failure',\r\n                        }\r\n                    }\r\n                },\r\n                failure: {\r\n                    initial: \"prompt\",\r\n                    on: { ENDSPEECH: \"welcome\" },\r\n                    states: {\r\n                        prompt: { entry: say(\"There is an error. Please check your proxy, your browser or retry later.\") }\r\n                    }\r\n                },\r\n                rasaChoice: {\r\n                    initial: \"prompt\",\r\n                    on: { ENDSPEECH: [{ \r\n                            cond: (context) =>  context.nluData.intent.name === 'appointment',\r\n                            target: \"appointment\"\r\n                        },\r\n                        { cond: (context) =>  context.nluData.intent.name === 'TODO_item',\r\n                            target: \"todo\"\r\n                        },\r\n                        { cond: (context) =>  context.nluData.intent.name === 'timer',\r\n                            target: \"timer\"\r\n                        },\r\n                        { target: \"welcome\" }]\r\n                    },\r\n                    ...prompt(\"Actualization.\"),\r\n                },\r\n                appointment: {\r\n                    ...prompt(\"Okay, let's create an appointment!\"),\r\n                    on: { ENDSPEECH: \r\n                            { actions: cancel('maxsp'),\r\n                            target: \"who\" },\r\n                    }\r\n                },\r\n                todo: {\r\n                    ...prompt(\"Let's create a to-do list!\"),\r\n                    on: { ENDSPEECH: \r\n                            { actions: cancel('maxsp'),\r\n                            target: \"welcome\" },\r\n                    }\r\n                },\r\n                timer: {\r\n                    ...prompt(\"Let's start a timer!\"),\r\n                    on: { ENDSPEECH: \r\n                            { actions: cancel('maxsp'),\r\n                            target: \"welcome\" },\r\n                    }\r\n                },\r\n                who: {\r\n                    initial: \"prompt\",\r\n                    on: {\r\n                        RECOGNISED: [{\r\n                            cond: (context) => \"person\" in (dict[context.recResult] || {}),\r\n                            actions: [ assign((context) => { return { person: dict[context.recResult].person } }), cancel('maxsp')],\r\n                            target: \"day\"\r\n\r\n                        },\r\n                        {\r\n                            cond:(context) => \"help\" in (dict[context.recResult] || {}),\r\n                            target: \".help\"\r\n                        },\r\n                        { target: \".nomatch\" }]\r\n                    },\r\n                    ...promptAndAsk(\"Who are you meeting with?\",\"Sorry, I don't know them.\", \"You can say Jennifer or John for example.\")\r\n                },\r\n                day: {\r\n                    initial: \"prompt\",\r\n                    on: {\r\n                        RECOGNISED: [{\r\n                            cond: (context) => \"day\" in (dict[context.recResult] || {}),\r\n                            actions: [ assign((context) => { return { day: dict[context.recResult].day } }), cancel('maxsp')],\r\n                            target: \"duration\"\r\n\r\n                        },\r\n                        {\r\n                            cond:(context) => \"help\" in (dict[context.recResult] || {}),\r\n                            target: \".help\"\r\n                        },\r\n                        { target: \".nomatch\" }]\r\n                    },\r\n                    states: {\r\n                        prompt: {\r\n                            entry: send((context) => ({\r\n                                type: \"SPEAK\",\r\n                                value: 'On which day is your meeting?',\r\n                            })),\r\n                            on: { ENDSPEECH: \"ask\" }\r\n                        },\r\n                        ask: {\r\n                            entry: [ \r\n                                send('LISTEN'),\r\n                                send('MAXSPEECH', { delay: 8000, id: 'maxsp' })\r\n                            ]\r\n                        },\r\n                        help: {\r\n                            entry: say(\"You can say monday, tuesday and so on.\"),\r\n                            on: { ENDSPEECH: [{ \r\n                                    actions: cancel('maxsp'),\r\n                                    target: \"prompt\"\r\n                            }] }\r\n                        },\r\n                        nomatch: {\r\n                            entry: say(\"Sorry, can you repeat?\"),\r\n                            on: { ENDSPEECH: [{ \r\n                                    actions: cancel('maxsp'),\r\n                                    target: \"prompt\"\r\n                            }] }\r\n                        },\r\n                    }\r\n                },\r\n                duration: {\r\n                    initial: \"prompt\",\r\n                    on: {\r\n                        RECOGNISED: [{\r\n                            cond: (context) => \"agree\" in (dict[context.recResult] || {}),\r\n                            actions: [ assign((context) => { return { agree: dict[context.recResult].agree } }), cancel('maxsp')],\r\n                            target: \"confirmationWholeDay\"\r\n                        },\r\n                        {   \r\n                            cond: (context) => \"refuse\" in (dict[context.recResult] || {}),\r\n                            actions: [ assign((context) => { return { refuse: dict[context.recResult].refuse } }), cancel('maxsp')],\r\n                            target: \"time\"\r\n                        },\r\n                        {\r\n                            cond:(context) => \"help\" in (dict[context.recResult] || {}),\r\n                            target: \".help\"\r\n                        },\r\n                        { target: \".nomatch\" }],\r\n                    },\r\n                    ...promptAndAsk(\"Will it take the whole day?\",\"Sorry, can you repeat?\", \"You can answer with yes or no.\")\r\n                },\r\n                time: {\r\n                    initial: \"prompt\",\r\n                    on: {\r\n                        RECOGNISED: [{\r\n                            cond: (context) => \"time\" in (dict[context.recResult] || {}),\r\n                            actions: [ assign((context) => { return { time: dict[context.recResult].time } }), cancel('maxsp')],\r\n                            target: \"regularConfirmation\"\r\n                        },\r\n                        {\r\n                            cond:(context) => \"help\" in (dict[context.recResult] || {}),\r\n                            target: \".help\"\r\n                        },\r\n                        { target: \".nomatch\" }]\r\n                    },\r\n                    ...promptAndAsk(\"What time is your meeting?\",\"Sorry, can you repeat?\", \"You can choose between 8 to 12 or 1 to 6.\")\r\n                },\r\n                regularConfirmation: {\r\n                    initial: \"prompt\",\r\n                    on: {\r\n                        RECOGNISED: [{\r\n                            cond: (context) => \"agree\" in (dict[context.recResult] || {}),\r\n                            actions: [ assign((context) => { return { agree: dict[context.recResult].agree } }), cancel('maxsp')],\r\n                            target: \"confirmation\"\r\n                        },\r\n                        {\r\n                            cond:(context) => \"help\" in (dict[context.recResult] || {}),\r\n                            target: \".help\"\r\n                        },\r\n                        {   \r\n                            cond: (context) => \"refuse\" in (dict[context.recResult] || {}),\r\n                            actions: [ assign((context) => { return { refuse: dict[context.recResult].refuse } }), cancel('maxsp')],\r\n                            target: \"who\"\r\n                        },\r\n                        { target: \".nomatch\" }],\r\n                    },\r\n                    states: {\r\n                        prompt: {\r\n                            entry: send((context) => ({\r\n                                type: \"SPEAK\",\r\n                                value: `Do you want me to create an appointment with ${context.person} on ${context.day} at ${context.time} ?`\r\n                            })),\r\n                            on: { ENDSPEECH: \"ask\" }\r\n                        },\r\n                        ask: {\r\n                            entry: [ \r\n                                send('LISTEN'),\r\n                                send('MAXSPEECH', { delay: 8000, id: 'maxsp' })\r\n                            ]\r\n                        },\r\n                        help: {\r\n                            entry: say(\"You can answer with yes or no.\"),\r\n                            on: { ENDSPEECH: [{ \r\n                                    actions: cancel('maxsp'),\r\n                                    target: \"prompt\"\r\n                            }] }\r\n                        },\r\n                        nomatch: {\r\n                            entry: say(\"Sorry can you repeat?\"),\r\n                            on: { ENDSPEECH: [{ \r\n                                    actions: cancel('maxsp'),\r\n                                    target: \"prompt\"\r\n                            }] }\r\n                        },\r\n                    }\r\n                },\r\n                confirmationWholeDay: {\r\n                    initial: \"prompt\",\r\n                    on: {\r\n                        RECOGNISED: [{\r\n                            cond: (context) => \"agree\" in (dict[context.recResult] || {}),\r\n                            actions: [ assign((context) => { return { agree: dict[context.recResult].agree } }), cancel('maxsp')],\r\n                            target: \"confirmation\"\r\n                        },\r\n                        {   \r\n                            cond: (context) => \"refuse\" in (dict[context.recResult] || {}),\r\n                            actions: [ assign((context) => { return { refuse: dict[context.recResult].refuse } }), cancel('maxsp')],\r\n                            target: \"who\"\r\n                        },\r\n                        {\r\n                            cond:(context) => \"help\" in (dict[context.recResult] || {}),\r\n                            target: \".help\"\r\n                        },\r\n                        { target: \".nomatch\" }],\r\n                    },\r\n                    states: {\r\n                        prompt: {\r\n                            entry: send((context) => ({\r\n                                type: \"SPEAK\",\r\n                                value: `Do you want me to create an appointment with ${context.person} on ${context.day} for the whole day?`\r\n                            })),\r\n                            on: { ENDSPEECH: \"ask\" }\r\n                        },\r\n                        ask: {\r\n                            entry: [ \r\n                                send('LISTEN'),\r\n                                send('MAXSPEECH', { delay: 8000, id: 'maxsp' })\r\n                            ]\r\n                        },\r\n                        help: {\r\n                            entry: say(\"You can answer with yes or no.\"),\r\n                            on: { ENDSPEECH: [{ \r\n                                    actions: cancel('maxsp'),\r\n                                    target: \"prompt\"\r\n                            }] }\r\n                        },\r\n                        nomatch: {\r\n                            entry: say(\"Sorry can you repeat?\"),\r\n                            on: { ENDSPEECH: [{ \r\n                                    actions: cancel('maxsp'),\r\n                                    target: \"prompt\"\r\n                            }] }\r\n                        },\r\n                    }\r\n                },\r\n                confirmation: {\r\n                    ...prompt(\"Your appointment has been created!\"),\r\n                    on: { ENDSPEECH: \"welcome\" }\r\n                }\r\n            }\r\n        },\r\n        first_call: {\r\n            entry: say(\"Please focus on my question.\"),\r\n            on: {\r\n                ENDSPEECH: [\r\n                    {\r\n                        cond: (context) => context.counter === 1,\r\n                        target: \"#root.dm.start.hist\"\r\n                    },\r\n                    {\r\n                        cond: (context) => context.counter === 2,\r\n                        target: \"#root.dm.start.hist\"\r\n                    },\r\n                    {\r\n                        cond: (context) => context.counter === 3,\r\n                        target: \"#root.dm.start.hist\"\r\n                    },\r\n                ],\r\n            }\r\n        },\r\n        second_call: {\r\n            entry: say(\"Are you still listening?\"),\r\n            on: {\r\n                ENDSPEECH: [\r\n                    {\r\n                        cond: (context) => context.counter === 1,\r\n                        target: \"#root.dm.start.hist\"\r\n                    },\r\n                    {\r\n                        cond: (context) => context.counter === 2,\r\n                        target: \"#root.dm.start.hist\"\r\n                    },\r\n                    {\r\n                        cond: (context) => context.counter === 3,\r\n                        target: \"#root.dm.start.hist\"\r\n                    },\r\n                ],\r\n            }\r\n        },\r\n        last_call: {\r\n            entry: say(\"Whatever, I don't want to listen anymore.\"),\r\n            on: {\r\n                ENDSPEECH: [\r\n                    {\r\n                        cond: (context) => context.counter === 1,\r\n                        target: \"#root.dm.start.hist\"\r\n                    },\r\n                    {\r\n                        cond: (context) => context.counter === 2,\r\n                        target: \"#root.dm.start.hist\"\r\n                    },\r\n                    {\r\n                        cond: (context) => context.counter === 3,\r\n                        target: \"#root.dm\"\r\n                    },\r\n                ],\r\n            }\r\n        },\r\n    }\r\n})\r\n\r\nconst dict: { [index: string]: { person?: string, day?: string, time?: string, agree?: string, refuse?: string, appointment?: string, todoitem?: string, timer?: string } } = {\r\n    \"John\": { person: \"John Appleseed\" },\r\n    \"Mary\": { person: \"Mary Orangeseed\" },\r\n    \"Dan\": { person: \"Dan Cherryseed\" },\r\n    \"Steve\": { person: \"Steve Strawberryseed\" },\r\n    \"Klaus\": { person: \"Klaus Pearseed\" },\r\n    \"Gus\": { person: \"Gus Bananaseed\" },\r\n    \"Jennifer\": { person: \"Jennifer Pineappleseed\" },\r\n    \"Monday\": { day: \"Monday\" },\r\n    \"Tuesday\": { day: \"Tuesday\" },\r\n    \"Wednesday\": { day: \"Wednesday\" },\r\n    \"Thursday\": { day: \"Thursday\" },\r\n    \"Friday\": { day: \"Friday\" },\r\n    \"Saturday\": { day: \"Saturday\" },\r\n    \"Sunday\": { day: \"Sunday\" },\r\n    \"next Monday\": { day: \"Monday\" },\r\n    \"next Tuesday\": { day: \"Tuesday\" },\r\n    \"next Wednesday\": { day: \"Wednesday\" },\r\n    \"next Thursday\": { day: \"Thursday\" },\r\n    \"next Friday\": { day: \"Friday\" },\r\n    \"next Saturday\": { day: \"Saturday\" },\r\n    \"next Sunday\": { day: \"Sunday\" },\r\n    \"on Monday\": { day: \"Monday\" },\r\n    \"on Tuesday\": { day: \"Tuesday\" },\r\n    \"on Wednesday\": { day: \"Wednesday\" },\r\n    \"on Thursday\": { day: \"Thursday\" },\r\n    \"on Friday\": { day: \"Friday\" },\r\n    \"on Saturday\": { day: \"Saturday\" },\r\n    \"on Sunday\": { day: \"Sunday\" },\r\n    \"it's at 8\": { time: \"08:00\" },\r\n    \"it's at 9\": { time: \"09:00\" },\r\n    \"it's at 10\": { time: \"10:00\" },\r\n    \"it's at 11\": { time: \"11:00\" },\r\n    \"it's at 12\": { time: \"12:00\" },\r\n    \"it's at 1\": { time: \"13:00\" },\r\n    \"it's at 2\": { time: \"14:00\" },\r\n    \"it's at 3\": { time: \"15:00\" },\r\n    \"it's at 4\": { time: \"16:00\" },\r\n    \"it's at 5\": { time: \"17:00\" },\r\n    \"it's at 6\": { time: \"18:00\" },\r\n    \"at 8\": { time: \"08:00\" },\r\n    \"at 9\": { time: \"09:00\" },\r\n    \"at 10\": { time: \"10:00\" },\r\n    \"at 11\": { time: \"11:00\" },\r\n    \"at 12\": { time: \"12:00\" },\r\n    \"at 1\": { time: \"13:00\" },\r\n    \"at 2\": { time: \"14:00\" },\r\n    \"at 3\": { time: \"15:00\" },\r\n    \"at 4\": { time: \"16:00\" },\r\n    \"at 5\": { time: \"17:00\" },\r\n    \"at 6\": { time: \"18:00\" },\r\n    \"8\": { time: \"08:00\" },\r\n    \"9\": { time: \"09:00\" },\r\n    \"10\": { time: \"10:00\" },\r\n    \"11\": { time: \"11:00\" },\r\n    \"12\": { time: \"12:00\" },\r\n    \"1\": { time: \"13:00\" },\r\n    \"2\": { time: \"14:00\" },\r\n    \"3\": { time: \"15:00\" },\r\n    \"4\": { time: \"16:00\" },\r\n    \"5\": { time: \"17:00\" },\r\n    \"6\": { time: \"18:00\" },\r\n    \"around 8\": { time: \"08:00\" },\r\n    \"around 9\": { time: \"09:00\" },\r\n    \"around 10\": { time: \"10:00\" },\r\n    \"around 11\": { time: \"11:00\" },\r\n    \"around 12\": { time: \"12:00\" },\r\n    \"around 1\": { time: \"13:00\" },\r\n    \"around 2\": { time: \"14:00\" },\r\n    \"around 3\": { time: \"15:00\" },\r\n    \"around 4\": { time: \"16:00\" },\r\n    \"around 5\": { time: \"17:00\" },\r\n    \"around 6\": { time: \"18:00\" },\r\n    \"I want to book an appointment\": { appointment: \"appointment\" },\r\n    \"rendez-vous\": { appointment: \"appointment\" },\r\n    \"appointment\": { appointment: \"appointment\" },\r\n    \"Let's create an appointment\": { appointment: \"appointment\" },\r\n    \"I want an appointment\": { appointment: \"appointment\" },\r\n    \"appointment\": { appointment: \"appointment\" },\r\n    \"schedule\": { appointment: \"appointment\" },\r\n    \"to-do list\": { todoitem: \"todoitem\" },\r\n    \"a to-do list\": { todoitem: \"todoitem\" },\r\n    \"list\": { todoitem: \"todoitem\" },\r\n    \"Let's start a to-do list\": { todoitem: \"todoitem\" },\r\n    \"I have something to do\": { todoitem: \"todoitem\" },\r\n    \"to do list\": { todoitem: \"todoitem\" },\r\n    \"timer\": { timer: \"timer\" },\r\n    \"a timer\": { timer: \"timer\" },\r\n    \"start the timer\": { timer: \"timer\" },\r\n    \"ring\": { timer: \"timer\" },\r\n    \"minute\": { timer: \"timer\" },\r\n    \"yes\": { agree: \"yes\" },\r\n    \"yeah\": { agree: \"yes\" },\r\n    \"sounds good\": { agree: \"yes\" },\r\n    \"of course\": { agree: \"yes\" },\r\n    \"probably\": { agree: \"yes\" },\r\n    \"it's fine\": { agree: \"yes\" },\r\n    \"no\": { refuse: \"no\" },\r\n    \"I'm not sure\": { refuse: \"no\" },\r\n    \"I don't think so\": { refuse: \"no\" },\r\n    \"no way\": { refuse: \"no\" },\r\n    \"absolutely not\": { refuse: \"no\" },\r\n    \"help\": { help: \"help\" },\r\n    \"I don't understand\": { help: \"help\" },\r\n    \"please help\": { help: \"help\" },\r\n    \"can you repeat\": { help: \"help\" },\r\n    \"let's go back\": { help: \"help\" },\r\n}"]},"metadata":{},"sourceType":"module"}