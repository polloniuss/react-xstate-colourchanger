{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spread = this && this.__spread || function () {\n  for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n\n  return ar;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toInvokeSource = exports.evaluateGuard = exports.reportUnhandledExceptionOnInvocation = exports.normalizeTarget = exports.toTransitionConfigArray = exports.toSCXMLEvent = exports.toEventObject = exports.uniqueId = exports.isActor = exports.isMachine = exports.symbolObservable = exports.isObservable = exports.toGuard = exports.isString = exports.isFunction = exports.isArray = exports.warn = exports.updateContext = exports.updateHistoryValue = exports.updateHistoryStates = exports.partition = exports.isPromiseLike = exports.isBuiltInEvent = exports.mapContext = exports.toArray = exports.toArrayStrict = exports.flatten = exports.pathsToStateValue = exports.toStatePaths = exports.nestedPath = exports.path = exports.mapFilterValues = exports.mapValues = exports.pathToStateValue = exports.toStateValue = exports.isStateLike = exports.toStatePath = exports.getActionType = exports.getEventType = exports.matchesState = exports.keys = void 0;\n\nvar constants_1 = require(\"./constants\");\n\nvar environment_1 = require(\"./environment\");\n\nfunction keys(value) {\n  return Object.keys(value);\n}\n\nexports.keys = keys;\n\nfunction matchesState(parentStateId, childStateId, delimiter) {\n  if (delimiter === void 0) {\n    delimiter = constants_1.STATE_DELIMITER;\n  }\n\n  var parentStateValue = toStateValue(parentStateId, delimiter);\n  var childStateValue = toStateValue(childStateId, delimiter);\n\n  if (isString(childStateValue)) {\n    if (isString(parentStateValue)) {\n      return childStateValue === parentStateValue;\n    } // Parent more specific than child\n\n\n    return false;\n  }\n\n  if (isString(parentStateValue)) {\n    return parentStateValue in childStateValue;\n  }\n\n  return keys(parentStateValue).every(function (key) {\n    if (!(key in childStateValue)) {\n      return false;\n    }\n\n    return matchesState(parentStateValue[key], childStateValue[key]);\n  });\n}\n\nexports.matchesState = matchesState;\n\nfunction getEventType(event) {\n  try {\n    return isString(event) || typeof event === 'number' ? \"\" + event : event.type;\n  } catch (e) {\n    throw new Error('Events must be strings or objects with a string event.type property.');\n  }\n}\n\nexports.getEventType = getEventType;\n\nfunction getActionType(action) {\n  try {\n    return isString(action) || typeof action === 'number' ? \"\" + action : isFunction(action) ? action.name : action.type;\n  } catch (e) {\n    throw new Error('Actions must be strings or objects with a string action.type property.');\n  }\n}\n\nexports.getActionType = getActionType;\n\nfunction toStatePath(stateId, delimiter) {\n  try {\n    if (isArray(stateId)) {\n      return stateId;\n    }\n\n    return stateId.toString().split(delimiter);\n  } catch (e) {\n    throw new Error(\"'\" + stateId + \"' is not a valid state path.\");\n  }\n}\n\nexports.toStatePath = toStatePath;\n\nfunction isStateLike(state) {\n  return typeof state === 'object' && 'value' in state && 'context' in state && 'event' in state && '_event' in state;\n}\n\nexports.isStateLike = isStateLike;\n\nfunction toStateValue(stateValue, delimiter) {\n  if (isStateLike(stateValue)) {\n    return stateValue.value;\n  }\n\n  if (isArray(stateValue)) {\n    return pathToStateValue(stateValue);\n  }\n\n  if (typeof stateValue !== 'string') {\n    return stateValue;\n  }\n\n  var statePath = toStatePath(stateValue, delimiter);\n  return pathToStateValue(statePath);\n}\n\nexports.toStateValue = toStateValue;\n\nfunction pathToStateValue(statePath) {\n  if (statePath.length === 1) {\n    return statePath[0];\n  }\n\n  var value = {};\n  var marker = value;\n\n  for (var i = 0; i < statePath.length - 1; i++) {\n    if (i === statePath.length - 2) {\n      marker[statePath[i]] = statePath[i + 1];\n    } else {\n      marker[statePath[i]] = {};\n      marker = marker[statePath[i]];\n    }\n  }\n\n  return value;\n}\n\nexports.pathToStateValue = pathToStateValue;\n\nfunction mapValues(collection, iteratee) {\n  var result = {};\n  var collectionKeys = keys(collection);\n\n  for (var i = 0; i < collectionKeys.length; i++) {\n    var key = collectionKeys[i];\n    result[key] = iteratee(collection[key], key, collection, i);\n  }\n\n  return result;\n}\n\nexports.mapValues = mapValues;\n\nfunction mapFilterValues(collection, iteratee, predicate) {\n  var e_1, _a;\n\n  var result = {};\n\n  try {\n    for (var _b = __values(keys(collection)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var item = collection[key];\n\n      if (!predicate(item)) {\n        continue;\n      }\n\n      result[key] = iteratee(item, key, collection);\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return result;\n}\n\nexports.mapFilterValues = mapFilterValues;\n/**\r\n * Retrieves a value at the given path.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\nexports.path = function (props) {\n  return function (object) {\n    var e_2, _a;\n\n    var result = object;\n\n    try {\n      for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n        var prop = props_1_1.value;\n        result = result[prop];\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    return result;\n  };\n};\n/**\r\n * Retrieves a value at the given path via the nested accessor prop.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\n\nfunction nestedPath(props, accessorProp) {\n  return function (object) {\n    var e_3, _a;\n\n    var result = object;\n\n    try {\n      for (var props_2 = __values(props), props_2_1 = props_2.next(); !props_2_1.done; props_2_1 = props_2.next()) {\n        var prop = props_2_1.value;\n        result = result[accessorProp][prop];\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (props_2_1 && !props_2_1.done && (_a = props_2.return)) _a.call(props_2);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    return result;\n  };\n}\n\nexports.nestedPath = nestedPath;\n\nfunction toStatePaths(stateValue) {\n  if (!stateValue) {\n    return [[]];\n  }\n\n  if (isString(stateValue)) {\n    return [[stateValue]];\n  }\n\n  var result = flatten(keys(stateValue).map(function (key) {\n    var subStateValue = stateValue[key];\n\n    if (typeof subStateValue !== 'string' && (!subStateValue || !Object.keys(subStateValue).length)) {\n      return [[key]];\n    }\n\n    return toStatePaths(stateValue[key]).map(function (subPath) {\n      return [key].concat(subPath);\n    });\n  }));\n  return result;\n}\n\nexports.toStatePaths = toStatePaths;\n\nfunction pathsToStateValue(paths) {\n  var e_4, _a;\n\n  var result = {};\n\n  if (paths && paths.length === 1 && paths[0].length === 1) {\n    return paths[0][0];\n  }\n\n  try {\n    for (var paths_1 = __values(paths), paths_1_1 = paths_1.next(); !paths_1_1.done; paths_1_1 = paths_1.next()) {\n      var currentPath = paths_1_1.value;\n      var marker = result; // tslint:disable-next-line:prefer-for-of\n\n      for (var i = 0; i < currentPath.length; i++) {\n        var subPath = currentPath[i];\n\n        if (i === currentPath.length - 2) {\n          marker[subPath] = currentPath[i + 1];\n          break;\n        }\n\n        marker[subPath] = marker[subPath] || {};\n        marker = marker[subPath];\n      }\n    }\n  } catch (e_4_1) {\n    e_4 = {\n      error: e_4_1\n    };\n  } finally {\n    try {\n      if (paths_1_1 && !paths_1_1.done && (_a = paths_1.return)) _a.call(paths_1);\n    } finally {\n      if (e_4) throw e_4.error;\n    }\n  }\n\n  return result;\n}\n\nexports.pathsToStateValue = pathsToStateValue;\n\nfunction flatten(array) {\n  var _a;\n\n  return (_a = []).concat.apply(_a, __spread(array));\n}\n\nexports.flatten = flatten;\n\nfunction toArrayStrict(value) {\n  if (isArray(value)) {\n    return value;\n  }\n\n  return [value];\n}\n\nexports.toArrayStrict = toArrayStrict;\n\nfunction toArray(value) {\n  if (value === undefined) {\n    return [];\n  }\n\n  return toArrayStrict(value);\n}\n\nexports.toArray = toArray;\n\nfunction mapContext(mapper, context, _event) {\n  var e_5, _a;\n\n  if (isFunction(mapper)) {\n    return mapper(context, _event.data);\n  }\n\n  var result = {};\n\n  try {\n    for (var _b = __values(Object.keys(mapper)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var subMapper = mapper[key];\n\n      if (isFunction(subMapper)) {\n        result[key] = subMapper(context, _event.data);\n      } else {\n        result[key] = subMapper;\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return result;\n}\n\nexports.mapContext = mapContext;\n\nfunction isBuiltInEvent(eventType) {\n  return /^(done|error)\\./.test(eventType);\n}\n\nexports.isBuiltInEvent = isBuiltInEvent;\n\nfunction isPromiseLike(value) {\n  if (value instanceof Promise) {\n    return true;\n  } // Check if shape matches the Promise/A+ specification for a \"thenable\".\n\n\n  if (value !== null && (isFunction(value) || typeof value === 'object') && isFunction(value.then)) {\n    return true;\n  }\n\n  return false;\n}\n\nexports.isPromiseLike = isPromiseLike;\n\nfunction partition(items, predicate) {\n  var e_6, _a;\n\n  var _b = __read([[], []], 2),\n      truthy = _b[0],\n      falsy = _b[1];\n\n  try {\n    for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n      var item = items_1_1.value;\n\n      if (predicate(item)) {\n        truthy.push(item);\n      } else {\n        falsy.push(item);\n      }\n    }\n  } catch (e_6_1) {\n    e_6 = {\n      error: e_6_1\n    };\n  } finally {\n    try {\n      if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n    } finally {\n      if (e_6) throw e_6.error;\n    }\n  }\n\n  return [truthy, falsy];\n}\n\nexports.partition = partition;\n\nfunction updateHistoryStates(hist, stateValue) {\n  return mapValues(hist.states, function (subHist, key) {\n    if (!subHist) {\n      return undefined;\n    }\n\n    var subStateValue = (isString(stateValue) ? undefined : stateValue[key]) || (subHist ? subHist.current : undefined);\n\n    if (!subStateValue) {\n      return undefined;\n    }\n\n    return {\n      current: subStateValue,\n      states: updateHistoryStates(subHist, subStateValue)\n    };\n  });\n}\n\nexports.updateHistoryStates = updateHistoryStates;\n\nfunction updateHistoryValue(hist, stateValue) {\n  return {\n    current: stateValue,\n    states: updateHistoryStates(hist, stateValue)\n  };\n}\n\nexports.updateHistoryValue = updateHistoryValue;\n\nfunction updateContext(context, _event, assignActions, state) {\n  if (!environment_1.IS_PRODUCTION) {\n    warn(!!context, 'Attempting to update undefined context');\n  }\n\n  var updatedContext = context ? assignActions.reduce(function (acc, assignAction) {\n    var e_7, _a;\n\n    var assignment = assignAction.assignment;\n    var meta = {\n      state: state,\n      action: assignAction,\n      _event: _event\n    };\n    var partialUpdate = {};\n\n    if (isFunction(assignment)) {\n      partialUpdate = assignment(acc, _event.data, meta);\n    } else {\n      try {\n        for (var _b = __values(keys(assignment)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var key = _c.value;\n          var propAssignment = assignment[key];\n          partialUpdate[key] = isFunction(propAssignment) ? propAssignment(acc, _event.data, meta) : propAssignment;\n        }\n      } catch (e_7_1) {\n        e_7 = {\n          error: e_7_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_7) throw e_7.error;\n        }\n      }\n    }\n\n    return Object.assign({}, acc, partialUpdate);\n  }, context) : context;\n  return updatedContext;\n}\n\nexports.updateContext = updateContext; // tslint:disable-next-line:no-empty\n\nvar warn = function warn() {};\n\nexports.warn = warn;\n\nif (!environment_1.IS_PRODUCTION) {\n  exports.warn = warn = function warn(condition, message) {\n    var error = condition instanceof Error ? condition : undefined;\n\n    if (!error && condition) {\n      return;\n    }\n\n    if (console !== undefined) {\n      var args = [\"Warning: \" + message];\n\n      if (error) {\n        args.push(error);\n      } // tslint:disable-next-line:no-console\n\n\n      console.warn.apply(console, args);\n    }\n  };\n}\n\nfunction isArray(value) {\n  return Array.isArray(value);\n}\n\nexports.isArray = isArray; // tslint:disable-next-line:ban-types\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nexports.isFunction = isFunction;\n\nfunction isString(value) {\n  return typeof value === 'string';\n}\n\nexports.isString = isString; // export function memoizedGetter<T, TP extends { prototype: object }>(\n//   o: TP,\n//   property: string,\n//   getter: () => T\n// ): void {\n//   Object.defineProperty(o.prototype, property, {\n//     get: getter,\n//     enumerable: false,\n//     configurable: false\n//   });\n// }\n\nfunction toGuard(condition, guardMap) {\n  if (!condition) {\n    return undefined;\n  }\n\n  if (isString(condition)) {\n    return {\n      type: constants_1.DEFAULT_GUARD_TYPE,\n      name: condition,\n      predicate: guardMap ? guardMap[condition] : undefined\n    };\n  }\n\n  if (isFunction(condition)) {\n    return {\n      type: constants_1.DEFAULT_GUARD_TYPE,\n      name: condition.name,\n      predicate: condition\n    };\n  }\n\n  return condition;\n}\n\nexports.toGuard = toGuard;\n\nfunction isObservable(value) {\n  try {\n    return 'subscribe' in value && isFunction(value.subscribe);\n  } catch (e) {\n    return false;\n  }\n}\n\nexports.isObservable = isObservable;\n\nexports.symbolObservable = function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}();\n\nfunction isMachine(value) {\n  try {\n    return '__xstatenode' in value;\n  } catch (e) {\n    return false;\n  }\n}\n\nexports.isMachine = isMachine;\n\nfunction isActor(value) {\n  return !!value && typeof value.send === 'function';\n}\n\nexports.isActor = isActor;\n\nexports.uniqueId = function () {\n  var currentId = 0;\n  return function () {\n    currentId++;\n    return currentId.toString(16);\n  };\n}();\n\nfunction toEventObject(event, payload // id?: TEvent['type']\n) {\n  if (isString(event) || typeof event === 'number') {\n    return __assign({\n      type: event\n    }, payload);\n  }\n\n  return event;\n}\n\nexports.toEventObject = toEventObject;\n\nfunction toSCXMLEvent(event, scxmlEvent) {\n  if (!isString(event) && '$$type' in event && event.$$type === 'scxml') {\n    return event;\n  }\n\n  var eventObject = toEventObject(event);\n  return __assign({\n    name: eventObject.type,\n    data: eventObject,\n    $$type: 'scxml',\n    type: 'external'\n  }, scxmlEvent);\n}\n\nexports.toSCXMLEvent = toSCXMLEvent;\n\nfunction toTransitionConfigArray(event, configLike) {\n  var transitions = toArrayStrict(configLike).map(function (transitionLike) {\n    if (typeof transitionLike === 'undefined' || typeof transitionLike === 'string' || isMachine(transitionLike)) {\n      return {\n        target: transitionLike,\n        event: event\n      };\n    }\n\n    return __assign(__assign({}, transitionLike), {\n      event: event\n    });\n  });\n  return transitions;\n}\n\nexports.toTransitionConfigArray = toTransitionConfigArray;\n\nfunction normalizeTarget(target) {\n  if (target === undefined || target === constants_1.TARGETLESS_KEY) {\n    return undefined;\n  }\n\n  return toArray(target);\n}\n\nexports.normalizeTarget = normalizeTarget;\n\nfunction reportUnhandledExceptionOnInvocation(originalError, currentError, id) {\n  if (!environment_1.IS_PRODUCTION) {\n    var originalStackTrace = originalError.stack ? \" Stacktrace was '\" + originalError.stack + \"'\" : '';\n\n    if (originalError === currentError) {\n      // tslint:disable-next-line:no-console\n      console.error(\"Missing onError handler for invocation '\" + id + \"', error was '\" + originalError + \"'.\" + originalStackTrace);\n    } else {\n      var stackTrace = currentError.stack ? \" Stacktrace was '\" + currentError.stack + \"'\" : ''; // tslint:disable-next-line:no-console\n\n      console.error(\"Missing onError handler and/or unhandled exception/promise rejection for invocation '\" + id + \"'. \" + (\"Original error: '\" + originalError + \"'. \" + originalStackTrace + \" Current error is '\" + currentError + \"'.\" + stackTrace));\n    }\n  }\n}\n\nexports.reportUnhandledExceptionOnInvocation = reportUnhandledExceptionOnInvocation;\n\nfunction evaluateGuard(machine, guard, context, _event, state) {\n  var guards = machine.options.guards;\n  var guardMeta = {\n    state: state,\n    cond: guard,\n    _event: _event\n  }; // TODO: do not hardcode!\n\n  if (guard.type === constants_1.DEFAULT_GUARD_TYPE) {\n    return guard.predicate(context, _event.data, guardMeta);\n  }\n\n  var condFn = guards[guard.type];\n\n  if (!condFn) {\n    throw new Error(\"Guard '\" + guard.type + \"' is not implemented on machine '\" + machine.id + \"'.\");\n  }\n\n  return condFn(context, _event.data, guardMeta);\n}\n\nexports.evaluateGuard = evaluateGuard;\n\nfunction toInvokeSource(src) {\n  if (typeof src === 'string') {\n    return {\n      type: src\n    };\n  }\n\n  return src;\n}\n\nexports.toInvokeSource = toInvokeSource;","map":{"version":3,"sources":["C:/Users/Bérénice/Documents/nodeJS/own_project/react-xstate-colourchanger/node_modules/xstate/lib/utils.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__values","o","Symbol","iterator","m","next","value","done","TypeError","__read","r","ar","e","push","error","__spread","concat","defineProperty","exports","toInvokeSource","evaluateGuard","reportUnhandledExceptionOnInvocation","normalizeTarget","toTransitionConfigArray","toSCXMLEvent","toEventObject","uniqueId","isActor","isMachine","symbolObservable","isObservable","toGuard","isString","isFunction","isArray","warn","updateContext","updateHistoryValue","updateHistoryStates","partition","isPromiseLike","isBuiltInEvent","mapContext","toArray","toArrayStrict","flatten","pathsToStateValue","toStatePaths","nestedPath","path","mapFilterValues","mapValues","pathToStateValue","toStateValue","isStateLike","toStatePath","getActionType","getEventType","matchesState","keys","constants_1","require","environment_1","parentStateId","childStateId","delimiter","STATE_DELIMITER","parentStateValue","childStateValue","every","key","event","type","Error","action","name","stateId","toString","split","state","stateValue","statePath","marker","collection","iteratee","result","collectionKeys","predicate","e_1","_a","_b","_c","item","e_1_1","return","props","object","e_2","props_1","props_1_1","prop","e_2_1","accessorProp","e_3","props_2","props_2_1","e_3_1","map","subStateValue","subPath","paths","e_4","paths_1","paths_1_1","currentPath","e_4_1","array","undefined","mapper","context","_event","e_5","data","subMapper","e_5_1","eventType","test","Promise","then","items","e_6","truthy","falsy","items_1","items_1_1","e_6_1","hist","states","subHist","current","assignActions","IS_PRODUCTION","updatedContext","reduce","acc","assignAction","e_7","assignment","meta","partialUpdate","propAssignment","e_7_1","condition","message","console","args","Array","guardMap","DEFAULT_GUARD_TYPE","subscribe","observable","send","currentId","payload","scxmlEvent","$$type","eventObject","configLike","transitions","transitionLike","target","TARGETLESS_KEY","originalError","currentError","id","originalStackTrace","stack","stackTrace","machine","guard","guards","options","guardMeta","cond","condFn","src"],"mappings":"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","sourcesContent":["\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spread = (this && this.__spread) || function () {\r\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toInvokeSource = exports.evaluateGuard = exports.reportUnhandledExceptionOnInvocation = exports.normalizeTarget = exports.toTransitionConfigArray = exports.toSCXMLEvent = exports.toEventObject = exports.uniqueId = exports.isActor = exports.isMachine = exports.symbolObservable = exports.isObservable = exports.toGuard = exports.isString = exports.isFunction = exports.isArray = exports.warn = exports.updateContext = exports.updateHistoryValue = exports.updateHistoryStates = exports.partition = exports.isPromiseLike = exports.isBuiltInEvent = exports.mapContext = exports.toArray = exports.toArrayStrict = exports.flatten = exports.pathsToStateValue = exports.toStatePaths = exports.nestedPath = exports.path = exports.mapFilterValues = exports.mapValues = exports.pathToStateValue = exports.toStateValue = exports.isStateLike = exports.toStatePath = exports.getActionType = exports.getEventType = exports.matchesState = exports.keys = void 0;\r\nvar constants_1 = require(\"./constants\");\r\nvar environment_1 = require(\"./environment\");\r\nfunction keys(value) {\r\n    return Object.keys(value);\r\n}\r\nexports.keys = keys;\r\nfunction matchesState(parentStateId, childStateId, delimiter) {\r\n    if (delimiter === void 0) { delimiter = constants_1.STATE_DELIMITER; }\r\n    var parentStateValue = toStateValue(parentStateId, delimiter);\r\n    var childStateValue = toStateValue(childStateId, delimiter);\r\n    if (isString(childStateValue)) {\r\n        if (isString(parentStateValue)) {\r\n            return childStateValue === parentStateValue;\r\n        }\r\n        // Parent more specific than child\r\n        return false;\r\n    }\r\n    if (isString(parentStateValue)) {\r\n        return parentStateValue in childStateValue;\r\n    }\r\n    return keys(parentStateValue).every(function (key) {\r\n        if (!(key in childStateValue)) {\r\n            return false;\r\n        }\r\n        return matchesState(parentStateValue[key], childStateValue[key]);\r\n    });\r\n}\r\nexports.matchesState = matchesState;\r\nfunction getEventType(event) {\r\n    try {\r\n        return isString(event) || typeof event === 'number'\r\n            ? \"\" + event\r\n            : event.type;\r\n    }\r\n    catch (e) {\r\n        throw new Error('Events must be strings or objects with a string event.type property.');\r\n    }\r\n}\r\nexports.getEventType = getEventType;\r\nfunction getActionType(action) {\r\n    try {\r\n        return isString(action) || typeof action === 'number'\r\n            ? \"\" + action\r\n            : isFunction(action)\r\n                ? action.name\r\n                : action.type;\r\n    }\r\n    catch (e) {\r\n        throw new Error('Actions must be strings or objects with a string action.type property.');\r\n    }\r\n}\r\nexports.getActionType = getActionType;\r\nfunction toStatePath(stateId, delimiter) {\r\n    try {\r\n        if (isArray(stateId)) {\r\n            return stateId;\r\n        }\r\n        return stateId.toString().split(delimiter);\r\n    }\r\n    catch (e) {\r\n        throw new Error(\"'\" + stateId + \"' is not a valid state path.\");\r\n    }\r\n}\r\nexports.toStatePath = toStatePath;\r\nfunction isStateLike(state) {\r\n    return (typeof state === 'object' &&\r\n        'value' in state &&\r\n        'context' in state &&\r\n        'event' in state &&\r\n        '_event' in state);\r\n}\r\nexports.isStateLike = isStateLike;\r\nfunction toStateValue(stateValue, delimiter) {\r\n    if (isStateLike(stateValue)) {\r\n        return stateValue.value;\r\n    }\r\n    if (isArray(stateValue)) {\r\n        return pathToStateValue(stateValue);\r\n    }\r\n    if (typeof stateValue !== 'string') {\r\n        return stateValue;\r\n    }\r\n    var statePath = toStatePath(stateValue, delimiter);\r\n    return pathToStateValue(statePath);\r\n}\r\nexports.toStateValue = toStateValue;\r\nfunction pathToStateValue(statePath) {\r\n    if (statePath.length === 1) {\r\n        return statePath[0];\r\n    }\r\n    var value = {};\r\n    var marker = value;\r\n    for (var i = 0; i < statePath.length - 1; i++) {\r\n        if (i === statePath.length - 2) {\r\n            marker[statePath[i]] = statePath[i + 1];\r\n        }\r\n        else {\r\n            marker[statePath[i]] = {};\r\n            marker = marker[statePath[i]];\r\n        }\r\n    }\r\n    return value;\r\n}\r\nexports.pathToStateValue = pathToStateValue;\r\nfunction mapValues(collection, iteratee) {\r\n    var result = {};\r\n    var collectionKeys = keys(collection);\r\n    for (var i = 0; i < collectionKeys.length; i++) {\r\n        var key = collectionKeys[i];\r\n        result[key] = iteratee(collection[key], key, collection, i);\r\n    }\r\n    return result;\r\n}\r\nexports.mapValues = mapValues;\r\nfunction mapFilterValues(collection, iteratee, predicate) {\r\n    var e_1, _a;\r\n    var result = {};\r\n    try {\r\n        for (var _b = __values(keys(collection)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n            var key = _c.value;\r\n            var item = collection[key];\r\n            if (!predicate(item)) {\r\n                continue;\r\n            }\r\n            result[key] = iteratee(item, key, collection);\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n    return result;\r\n}\r\nexports.mapFilterValues = mapFilterValues;\r\n/**\r\n * Retrieves a value at the given path.\r\n * @param props The deep path to the prop of the desired value\r\n */\r\nexports.path = function (props) { return function (object) {\r\n    var e_2, _a;\r\n    var result = object;\r\n    try {\r\n        for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\r\n            var prop = props_1_1.value;\r\n            result = result[prop];\r\n        }\r\n    }\r\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n    finally {\r\n        try {\r\n            if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\r\n        }\r\n        finally { if (e_2) throw e_2.error; }\r\n    }\r\n    return result;\r\n}; };\r\n/**\r\n * Retrieves a value at the given path via the nested accessor prop.\r\n * @param props The deep path to the prop of the desired value\r\n */\r\nfunction nestedPath(props, accessorProp) {\r\n    return function (object) {\r\n        var e_3, _a;\r\n        var result = object;\r\n        try {\r\n            for (var props_2 = __values(props), props_2_1 = props_2.next(); !props_2_1.done; props_2_1 = props_2.next()) {\r\n                var prop = props_2_1.value;\r\n                result = result[accessorProp][prop];\r\n            }\r\n        }\r\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\r\n        finally {\r\n            try {\r\n                if (props_2_1 && !props_2_1.done && (_a = props_2.return)) _a.call(props_2);\r\n            }\r\n            finally { if (e_3) throw e_3.error; }\r\n        }\r\n        return result;\r\n    };\r\n}\r\nexports.nestedPath = nestedPath;\r\nfunction toStatePaths(stateValue) {\r\n    if (!stateValue) {\r\n        return [[]];\r\n    }\r\n    if (isString(stateValue)) {\r\n        return [[stateValue]];\r\n    }\r\n    var result = flatten(keys(stateValue).map(function (key) {\r\n        var subStateValue = stateValue[key];\r\n        if (typeof subStateValue !== 'string' &&\r\n            (!subStateValue || !Object.keys(subStateValue).length)) {\r\n            return [[key]];\r\n        }\r\n        return toStatePaths(stateValue[key]).map(function (subPath) {\r\n            return [key].concat(subPath);\r\n        });\r\n    }));\r\n    return result;\r\n}\r\nexports.toStatePaths = toStatePaths;\r\nfunction pathsToStateValue(paths) {\r\n    var e_4, _a;\r\n    var result = {};\r\n    if (paths && paths.length === 1 && paths[0].length === 1) {\r\n        return paths[0][0];\r\n    }\r\n    try {\r\n        for (var paths_1 = __values(paths), paths_1_1 = paths_1.next(); !paths_1_1.done; paths_1_1 = paths_1.next()) {\r\n            var currentPath = paths_1_1.value;\r\n            var marker = result;\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (var i = 0; i < currentPath.length; i++) {\r\n                var subPath = currentPath[i];\r\n                if (i === currentPath.length - 2) {\r\n                    marker[subPath] = currentPath[i + 1];\r\n                    break;\r\n                }\r\n                marker[subPath] = marker[subPath] || {};\r\n                marker = marker[subPath];\r\n            }\r\n        }\r\n    }\r\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\r\n    finally {\r\n        try {\r\n            if (paths_1_1 && !paths_1_1.done && (_a = paths_1.return)) _a.call(paths_1);\r\n        }\r\n        finally { if (e_4) throw e_4.error; }\r\n    }\r\n    return result;\r\n}\r\nexports.pathsToStateValue = pathsToStateValue;\r\nfunction flatten(array) {\r\n    var _a;\r\n    return (_a = []).concat.apply(_a, __spread(array));\r\n}\r\nexports.flatten = flatten;\r\nfunction toArrayStrict(value) {\r\n    if (isArray(value)) {\r\n        return value;\r\n    }\r\n    return [value];\r\n}\r\nexports.toArrayStrict = toArrayStrict;\r\nfunction toArray(value) {\r\n    if (value === undefined) {\r\n        return [];\r\n    }\r\n    return toArrayStrict(value);\r\n}\r\nexports.toArray = toArray;\r\nfunction mapContext(mapper, context, _event) {\r\n    var e_5, _a;\r\n    if (isFunction(mapper)) {\r\n        return mapper(context, _event.data);\r\n    }\r\n    var result = {};\r\n    try {\r\n        for (var _b = __values(Object.keys(mapper)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n            var key = _c.value;\r\n            var subMapper = mapper[key];\r\n            if (isFunction(subMapper)) {\r\n                result[key] = subMapper(context, _event.data);\r\n            }\r\n            else {\r\n                result[key] = subMapper;\r\n            }\r\n        }\r\n    }\r\n    catch (e_5_1) { e_5 = { error: e_5_1 }; }\r\n    finally {\r\n        try {\r\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n        }\r\n        finally { if (e_5) throw e_5.error; }\r\n    }\r\n    return result;\r\n}\r\nexports.mapContext = mapContext;\r\nfunction isBuiltInEvent(eventType) {\r\n    return /^(done|error)\\./.test(eventType);\r\n}\r\nexports.isBuiltInEvent = isBuiltInEvent;\r\nfunction isPromiseLike(value) {\r\n    if (value instanceof Promise) {\r\n        return true;\r\n    }\r\n    // Check if shape matches the Promise/A+ specification for a \"thenable\".\r\n    if (value !== null &&\r\n        (isFunction(value) || typeof value === 'object') &&\r\n        isFunction(value.then)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexports.isPromiseLike = isPromiseLike;\r\nfunction partition(items, predicate) {\r\n    var e_6, _a;\r\n    var _b = __read([[], []], 2), truthy = _b[0], falsy = _b[1];\r\n    try {\r\n        for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\r\n            var item = items_1_1.value;\r\n            if (predicate(item)) {\r\n                truthy.push(item);\r\n            }\r\n            else {\r\n                falsy.push(item);\r\n            }\r\n        }\r\n    }\r\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\r\n    finally {\r\n        try {\r\n            if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\r\n        }\r\n        finally { if (e_6) throw e_6.error; }\r\n    }\r\n    return [truthy, falsy];\r\n}\r\nexports.partition = partition;\r\nfunction updateHistoryStates(hist, stateValue) {\r\n    return mapValues(hist.states, function (subHist, key) {\r\n        if (!subHist) {\r\n            return undefined;\r\n        }\r\n        var subStateValue = (isString(stateValue) ? undefined : stateValue[key]) ||\r\n            (subHist ? subHist.current : undefined);\r\n        if (!subStateValue) {\r\n            return undefined;\r\n        }\r\n        return {\r\n            current: subStateValue,\r\n            states: updateHistoryStates(subHist, subStateValue)\r\n        };\r\n    });\r\n}\r\nexports.updateHistoryStates = updateHistoryStates;\r\nfunction updateHistoryValue(hist, stateValue) {\r\n    return {\r\n        current: stateValue,\r\n        states: updateHistoryStates(hist, stateValue)\r\n    };\r\n}\r\nexports.updateHistoryValue = updateHistoryValue;\r\nfunction updateContext(context, _event, assignActions, state) {\r\n    if (!environment_1.IS_PRODUCTION) {\r\n        warn(!!context, 'Attempting to update undefined context');\r\n    }\r\n    var updatedContext = context\r\n        ? assignActions.reduce(function (acc, assignAction) {\r\n            var e_7, _a;\r\n            var assignment = assignAction.assignment;\r\n            var meta = {\r\n                state: state,\r\n                action: assignAction,\r\n                _event: _event\r\n            };\r\n            var partialUpdate = {};\r\n            if (isFunction(assignment)) {\r\n                partialUpdate = assignment(acc, _event.data, meta);\r\n            }\r\n            else {\r\n                try {\r\n                    for (var _b = __values(keys(assignment)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                        var key = _c.value;\r\n                        var propAssignment = assignment[key];\r\n                        partialUpdate[key] = isFunction(propAssignment)\r\n                            ? propAssignment(acc, _event.data, meta)\r\n                            : propAssignment;\r\n                    }\r\n                }\r\n                catch (e_7_1) { e_7 = { error: e_7_1 }; }\r\n                finally {\r\n                    try {\r\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n                    }\r\n                    finally { if (e_7) throw e_7.error; }\r\n                }\r\n            }\r\n            return Object.assign({}, acc, partialUpdate);\r\n        }, context)\r\n        : context;\r\n    return updatedContext;\r\n}\r\nexports.updateContext = updateContext;\r\n// tslint:disable-next-line:no-empty\r\nvar warn = function () { };\r\nexports.warn = warn;\r\nif (!environment_1.IS_PRODUCTION) {\r\n    exports.warn = warn = function (condition, message) {\r\n        var error = condition instanceof Error ? condition : undefined;\r\n        if (!error && condition) {\r\n            return;\r\n        }\r\n        if (console !== undefined) {\r\n            var args = [\"Warning: \" + message];\r\n            if (error) {\r\n                args.push(error);\r\n            }\r\n            // tslint:disable-next-line:no-console\r\n            console.warn.apply(console, args);\r\n        }\r\n    };\r\n}\r\nfunction isArray(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.isArray = isArray;\r\n// tslint:disable-next-line:ban-types\r\nfunction isFunction(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.isFunction = isFunction;\r\nfunction isString(value) {\r\n    return typeof value === 'string';\r\n}\r\nexports.isString = isString;\r\n// export function memoizedGetter<T, TP extends { prototype: object }>(\r\n//   o: TP,\r\n//   property: string,\r\n//   getter: () => T\r\n// ): void {\r\n//   Object.defineProperty(o.prototype, property, {\r\n//     get: getter,\r\n//     enumerable: false,\r\n//     configurable: false\r\n//   });\r\n// }\r\nfunction toGuard(condition, guardMap) {\r\n    if (!condition) {\r\n        return undefined;\r\n    }\r\n    if (isString(condition)) {\r\n        return {\r\n            type: constants_1.DEFAULT_GUARD_TYPE,\r\n            name: condition,\r\n            predicate: guardMap ? guardMap[condition] : undefined\r\n        };\r\n    }\r\n    if (isFunction(condition)) {\r\n        return {\r\n            type: constants_1.DEFAULT_GUARD_TYPE,\r\n            name: condition.name,\r\n            predicate: condition\r\n        };\r\n    }\r\n    return condition;\r\n}\r\nexports.toGuard = toGuard;\r\nfunction isObservable(value) {\r\n    try {\r\n        return 'subscribe' in value && isFunction(value.subscribe);\r\n    }\r\n    catch (e) {\r\n        return false;\r\n    }\r\n}\r\nexports.isObservable = isObservable;\r\nexports.symbolObservable = (function () {\r\n    return (typeof Symbol === 'function' && Symbol.observable) || '@@observable';\r\n})();\r\nfunction isMachine(value) {\r\n    try {\r\n        return '__xstatenode' in value;\r\n    }\r\n    catch (e) {\r\n        return false;\r\n    }\r\n}\r\nexports.isMachine = isMachine;\r\nfunction isActor(value) {\r\n    return !!value && typeof value.send === 'function';\r\n}\r\nexports.isActor = isActor;\r\nexports.uniqueId = (function () {\r\n    var currentId = 0;\r\n    return function () {\r\n        currentId++;\r\n        return currentId.toString(16);\r\n    };\r\n})();\r\nfunction toEventObject(event, payload\r\n// id?: TEvent['type']\r\n) {\r\n    if (isString(event) || typeof event === 'number') {\r\n        return __assign({ type: event }, payload);\r\n    }\r\n    return event;\r\n}\r\nexports.toEventObject = toEventObject;\r\nfunction toSCXMLEvent(event, scxmlEvent) {\r\n    if (!isString(event) && '$$type' in event && event.$$type === 'scxml') {\r\n        return event;\r\n    }\r\n    var eventObject = toEventObject(event);\r\n    return __assign({ name: eventObject.type, data: eventObject, $$type: 'scxml', type: 'external' }, scxmlEvent);\r\n}\r\nexports.toSCXMLEvent = toSCXMLEvent;\r\nfunction toTransitionConfigArray(event, configLike) {\r\n    var transitions = toArrayStrict(configLike).map(function (transitionLike) {\r\n        if (typeof transitionLike === 'undefined' ||\r\n            typeof transitionLike === 'string' ||\r\n            isMachine(transitionLike)) {\r\n            return { target: transitionLike, event: event };\r\n        }\r\n        return __assign(__assign({}, transitionLike), { event: event });\r\n    });\r\n    return transitions;\r\n}\r\nexports.toTransitionConfigArray = toTransitionConfigArray;\r\nfunction normalizeTarget(target) {\r\n    if (target === undefined || target === constants_1.TARGETLESS_KEY) {\r\n        return undefined;\r\n    }\r\n    return toArray(target);\r\n}\r\nexports.normalizeTarget = normalizeTarget;\r\nfunction reportUnhandledExceptionOnInvocation(originalError, currentError, id) {\r\n    if (!environment_1.IS_PRODUCTION) {\r\n        var originalStackTrace = originalError.stack\r\n            ? \" Stacktrace was '\" + originalError.stack + \"'\"\r\n            : '';\r\n        if (originalError === currentError) {\r\n            // tslint:disable-next-line:no-console\r\n            console.error(\"Missing onError handler for invocation '\" + id + \"', error was '\" + originalError + \"'.\" + originalStackTrace);\r\n        }\r\n        else {\r\n            var stackTrace = currentError.stack\r\n                ? \" Stacktrace was '\" + currentError.stack + \"'\"\r\n                : '';\r\n            // tslint:disable-next-line:no-console\r\n            console.error(\"Missing onError handler and/or unhandled exception/promise rejection for invocation '\" + id + \"'. \" +\r\n                (\"Original error: '\" + originalError + \"'. \" + originalStackTrace + \" Current error is '\" + currentError + \"'.\" + stackTrace));\r\n        }\r\n    }\r\n}\r\nexports.reportUnhandledExceptionOnInvocation = reportUnhandledExceptionOnInvocation;\r\nfunction evaluateGuard(machine, guard, context, _event, state) {\r\n    var guards = machine.options.guards;\r\n    var guardMeta = {\r\n        state: state,\r\n        cond: guard,\r\n        _event: _event\r\n    };\r\n    // TODO: do not hardcode!\r\n    if (guard.type === constants_1.DEFAULT_GUARD_TYPE) {\r\n        return guard.predicate(context, _event.data, guardMeta);\r\n    }\r\n    var condFn = guards[guard.type];\r\n    if (!condFn) {\r\n        throw new Error(\"Guard '\" + guard.type + \"' is not implemented on machine '\" + machine.id + \"'.\");\r\n    }\r\n    return condFn(context, _event.data, guardMeta);\r\n}\r\nexports.evaluateGuard = evaluateGuard;\r\nfunction toInvokeSource(src) {\r\n    if (typeof src === 'string') {\r\n        return { type: src };\r\n    }\r\n    return src;\r\n}\r\nexports.toInvokeSource = toInvokeSource;\r\n"]},"metadata":{},"sourceType":"script"}