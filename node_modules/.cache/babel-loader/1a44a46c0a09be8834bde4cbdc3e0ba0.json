{"ast":null,"code":"import { __assign } from './_virtual/_tslib.js';\nvar defaultOptions = {\n  deferEvents: false\n};\n\nvar Scheduler =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  function Scheduler(options) {\n    this.processingEvent = false;\n    this.queue = [];\n    this.initialized = false;\n    this.options = __assign(__assign({}, defaultOptions), options);\n  }\n\n  Scheduler.prototype.initialize = function (callback) {\n    this.initialized = true;\n\n    if (callback) {\n      if (!this.options.deferEvents) {\n        this.schedule(callback);\n        return;\n      }\n\n      this.process(callback);\n    }\n\n    this.flushEvents();\n  };\n\n  Scheduler.prototype.schedule = function (task) {\n    if (!this.initialized || this.processingEvent) {\n      this.queue.push(task);\n      return;\n    }\n\n    if (this.queue.length !== 0) {\n      throw new Error('Event queue should be empty when it is not processing events');\n    }\n\n    this.process(task);\n    this.flushEvents();\n  };\n\n  Scheduler.prototype.clear = function () {\n    this.queue = [];\n  };\n\n  Scheduler.prototype.flushEvents = function () {\n    var nextCallback = this.queue.shift();\n\n    while (nextCallback) {\n      this.process(nextCallback);\n      nextCallback = this.queue.shift();\n    }\n  };\n\n  Scheduler.prototype.process = function (callback) {\n    this.processingEvent = true;\n\n    try {\n      callback();\n    } catch (e) {\n      // there is no use to keep the future events\n      // as the situation is not anymore the same\n      this.clear();\n      throw e;\n    } finally {\n      this.processingEvent = false;\n    }\n  };\n\n  return Scheduler;\n}();\n\nexport { Scheduler };","map":{"version":3,"sources":["C:/Users/Bérénice/Documents/nodeJS/own_project/react-xstate-colourchanger/node_modules/xstate/es/scheduler.js"],"names":["__assign","defaultOptions","deferEvents","Scheduler","options","processingEvent","queue","initialized","prototype","initialize","callback","schedule","process","flushEvents","task","push","length","Error","clear","nextCallback","shift","e"],"mappings":"AAAA,SAASA,QAAT,QAAyB,sBAAzB;AACA,IAAIC,cAAc,GAAG;AACnBC,EAAAA,WAAW,EAAE;AADM,CAArB;;AAIA,IAAIC,SAAS;AACb;;AAEA;AACA,YAAY;AACV,WAASA,SAAT,CAAmBC,OAAnB,EAA4B;AAC1B,SAAKC,eAAL,GAAuB,KAAvB;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,WAAL,GAAmB,KAAnB;AACA,SAAKH,OAAL,GAAeJ,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKC,cAAL,CAAT,EAA+BG,OAA/B,CAAvB;AACD;;AAEDD,EAAAA,SAAS,CAACK,SAAV,CAAoBC,UAApB,GAAiC,UAAUC,QAAV,EAAoB;AACnD,SAAKH,WAAL,GAAmB,IAAnB;;AAEA,QAAIG,QAAJ,EAAc;AACZ,UAAI,CAAC,KAAKN,OAAL,CAAaF,WAAlB,EAA+B;AAC7B,aAAKS,QAAL,CAAcD,QAAd;AACA;AACD;;AAED,WAAKE,OAAL,CAAaF,QAAb;AACD;;AAED,SAAKG,WAAL;AACD,GAbD;;AAeAV,EAAAA,SAAS,CAACK,SAAV,CAAoBG,QAApB,GAA+B,UAAUG,IAAV,EAAgB;AAC7C,QAAI,CAAC,KAAKP,WAAN,IAAqB,KAAKF,eAA9B,EAA+C;AAC7C,WAAKC,KAAL,CAAWS,IAAX,CAAgBD,IAAhB;AACA;AACD;;AAED,QAAI,KAAKR,KAAL,CAAWU,MAAX,KAAsB,CAA1B,EAA6B;AAC3B,YAAM,IAAIC,KAAJ,CAAU,8DAAV,CAAN;AACD;;AAED,SAAKL,OAAL,CAAaE,IAAb;AACA,SAAKD,WAAL;AACD,GAZD;;AAcAV,EAAAA,SAAS,CAACK,SAAV,CAAoBU,KAApB,GAA4B,YAAY;AACtC,SAAKZ,KAAL,GAAa,EAAb;AACD,GAFD;;AAIAH,EAAAA,SAAS,CAACK,SAAV,CAAoBK,WAApB,GAAkC,YAAY;AAC5C,QAAIM,YAAY,GAAG,KAAKb,KAAL,CAAWc,KAAX,EAAnB;;AAEA,WAAOD,YAAP,EAAqB;AACnB,WAAKP,OAAL,CAAaO,YAAb;AACAA,MAAAA,YAAY,GAAG,KAAKb,KAAL,CAAWc,KAAX,EAAf;AACD;AACF,GAPD;;AASAjB,EAAAA,SAAS,CAACK,SAAV,CAAoBI,OAApB,GAA8B,UAAUF,QAAV,EAAoB;AAChD,SAAKL,eAAL,GAAuB,IAAvB;;AAEA,QAAI;AACFK,MAAAA,QAAQ;AACT,KAFD,CAEE,OAAOW,CAAP,EAAU;AACV;AACA;AACA,WAAKH,KAAL;AACA,YAAMG,CAAN;AACD,KAPD,SAOU;AACR,WAAKhB,eAAL,GAAuB,KAAvB;AACD;AACF,GAbD;;AAeA,SAAOF,SAAP;AACD,CAlED,EAJA;;AAwEA,SAASA,SAAT","sourcesContent":["import { __assign } from './_virtual/_tslib.js';\r\nvar defaultOptions = {\r\n  deferEvents: false\r\n};\r\n\r\nvar Scheduler =\r\n/*#__PURE__*/\r\n\r\n/** @class */\r\nfunction () {\r\n  function Scheduler(options) {\r\n    this.processingEvent = false;\r\n    this.queue = [];\r\n    this.initialized = false;\r\n    this.options = __assign(__assign({}, defaultOptions), options);\r\n  }\r\n\r\n  Scheduler.prototype.initialize = function (callback) {\r\n    this.initialized = true;\r\n\r\n    if (callback) {\r\n      if (!this.options.deferEvents) {\r\n        this.schedule(callback);\r\n        return;\r\n      }\r\n\r\n      this.process(callback);\r\n    }\r\n\r\n    this.flushEvents();\r\n  };\r\n\r\n  Scheduler.prototype.schedule = function (task) {\r\n    if (!this.initialized || this.processingEvent) {\r\n      this.queue.push(task);\r\n      return;\r\n    }\r\n\r\n    if (this.queue.length !== 0) {\r\n      throw new Error('Event queue should be empty when it is not processing events');\r\n    }\r\n\r\n    this.process(task);\r\n    this.flushEvents();\r\n  };\r\n\r\n  Scheduler.prototype.clear = function () {\r\n    this.queue = [];\r\n  };\r\n\r\n  Scheduler.prototype.flushEvents = function () {\r\n    var nextCallback = this.queue.shift();\r\n\r\n    while (nextCallback) {\r\n      this.process(nextCallback);\r\n      nextCallback = this.queue.shift();\r\n    }\r\n  };\r\n\r\n  Scheduler.prototype.process = function (callback) {\r\n    this.processingEvent = true;\r\n\r\n    try {\r\n      callback();\r\n    } catch (e) {\r\n      // there is no use to keep the future events\r\n      // as the situation is not anymore the same\r\n      this.clear();\r\n      throw e;\r\n    } finally {\r\n      this.processingEvent = false;\r\n    }\r\n  };\r\n\r\n  return Scheduler;\r\n}();\r\n\r\nexport { Scheduler };"]},"metadata":{},"sourceType":"module"}